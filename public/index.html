<!DOCTYPE html>
<html>
<head>
  <title>Price Comparison</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>Price Comparison</h1>
  <div class="products">
  <button onclick="filterProduct('Almond Butter')">Almond Butter</button>
  <button onclick="filterProduct('Cheese')">Cheese</button>
  <button onclick="filterProduct('Eggs')">Eggs</button>
  <button onclick="filterProduct('Meat')">Meat</button>
  <button onclick="filterProduct('Milk')">Milk</button>
  <button onclick="filterProduct('Yogurt')">Yogurt</button>
  </div>
  <input id="search" placeholder="Search product">
  <button onclick="searchItems()">Find Cheapest</button>
  <div id="results"></div>

 <script>
  async function filterProduct(productName) {
    const res = await fetch('/api/items?category=' + productName + '&sortBy=unit_price');
    const items = await res.json();
    displayResults(items);
  }

    function displayResults(items) {
      document.getElementById('results').innerHTML = items.map(item => 
        `<div class="item">
          <h3>${item.name}</h3>

          <p>
            <span class="descriptor">
              Size:
            </span>
          ${item.size}
          </p>

          <p>
            <span class="descriptor">
              Brand:
            </span>
            ${item.brand}
          </p>

          <p>
            <span class="descriptor">
              Store:
            </span>
            ${item.store_name}
            <span class="descriptor-italic">
              (Store brand:
            ${item.is_store_brand ? 'Yes' : 'No'})
            </span>
          </p>

          <p>
            <span class="descriptor">
              Organic:
            </span>
            ${item.is_organic ? 'Yes' : 'No'}
          </p>

          <p class="price">
            $${item.price}
          </p>

          <p>
            <span class="descriptor">
              Unit Price:
            </span>
            <span class="unit-price">
              $${item.unit_price}/${item.unit}
            </span>
          </p>

        </div>`
      ).join('');
    }
  </script>
</body>
</html>